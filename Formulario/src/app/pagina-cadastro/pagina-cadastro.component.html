<app-header [titleT]="title"></app-header>
<main class="cadastro-container-x">
    <div class="cadastro-container-y">
        <form class="cadastro-container-y" [formGroup]="formulario" (ngSubmit)="onSubmit()">
            <section class="nome-sobrenome">
                <mat-form-field class="nome">
                    <mat-label>Nome</mat-label>
                    <input matInput id="nome" formControlName="nome">
                </mat-form-field>
                <mat-form-field class="sobrenome">
                    <mat-label>Sobrenome</mat-label>
                    <input matInput id="sobrenome" formControlName="sobrenome">
                </mat-form-field>
            </section>
            <mat-form-field>
                <mat-label>Data de Nascimento</mat-label>
                <input matInput [matDatepicker]="picker" id="datanascimento" formControlName="datanascimento">
                <mat-hint>DD/MM/YYYY</mat-hint>
                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Email</mat-label>
                <input type="email" matInput id="email" formControlName="email" [formControl]="emailFormControl" [errorStateMatcher]="matcher"
                    placeholder="Ex. pat@example.com">
                @if (emailFormControl.hasError('email') && !emailFormControl.hasError('required')) {
                <mat-error>Please enter a valid email address</mat-error>
                }
                @if (emailFormControl.hasError('required')) {
                <mat-error>Email is <strong>required</strong></mat-error>
                }
            </mat-form-field>

            <section class="logradouro-numerorua">
                <mat-form-field class="logradouro">
                    <mat-label>Logradouro</mat-label>
                    <input matInput id="logradouro" formControlName="logradouro">
                </mat-form-field>
                <mat-form-field class="numerorua">
                    <mat-label>Numero</mat-label>
                    <input matInput id="numerologradouro" formControlName="numerologradouro">
                </mat-form-field>
            </section>

            <section class="bairro-cidade">
                <mat-form-field class="bairro">
                    <mat-label>Bairro</mat-label>
                    <input matInput id="bairro" formControlName="bairro">
                </mat-form-field>
                <mat-form-field class="cidade">
                    <mat-label>Cidade</mat-label>
                    <input matInput id="cidade" formControlName="cidade">
                </mat-form-field>
            </section>

            <section class="estado-cep">
                <mat-form-field class="estado">
                    <mat-label>Estado</mat-label>
                    <input matInput id="estado" formControlName="estado">
                </mat-form-field>
                <mat-form-field class="cep">
                    <mat-label>CEP</mat-label>
                    <input matInput id="cep" formControlName="cep">
                </mat-form-field>
            </section>

            <mat-form-field>
                <mat-label>Complemento</mat-label>
                <input matInput id="complemento" formControlName="complemento">
            </mat-form-field>
            
            <div class="image-input">
                <input type="file" accept="image/*" capture="environment"  multiple (change)="onFileSelected($event)">
            </div>

            <div class="images">
                @for (imagem of images; track $index) {
                    <div>
                        <img [src]="imagem.url" alt="Imagem" class="images">
                    </div>
                }
            </div>
            <button mat-raised-button color="primary" type="submit">Concluir</button>
        </form>
    </div>
</main>